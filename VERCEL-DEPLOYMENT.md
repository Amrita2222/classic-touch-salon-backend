# Deploying to Vercel

This document provides instructions for deploying the Classic Touch Saloon Backend to Vercel.

## Prerequisites

1. A Vercel account (https://vercel.com)
2. Vercel CLI installed (npm install -g vercel)
3. MongoDB Atlas or similar cloud database service for production

## Local Development

1. Install dependencies:
   ```
   npm install
   ```

2. Create a `.env` file based on `.env.example` and set your environment variables.

3. Run the development server:
   ```
   npm run dev
   ```

4. Test with Vercel dev environment locally:
   ```
   npm run vercel-dev
   ```

## Deployment

### First-time Setup

1. Login to Vercel:
   ```
   vercel login
   ```

2. Initialize the project (this will create a `.vercel` folder):
   ```
   vercel
   ```
   - Follow the prompts to link to your Vercel project

3. Set up environment variables on Vercel dashboard:
   - Go to your project on Vercel dashboard
   - Navigate to Settings > Environment Variables
   - Add all required environment variables from your `.env.production` file:
     - `MONGODB_URI`: Your MongoDB connection string
     - `ALLOWED_ORIGINS`: Comma-separated list of allowed origin URLs
     - Any other environment variables your app needs

### Deploying

Deploy to production:
```
npm run deploy
```

Or manually deploy:
```
vercel --prod
```

## Configuration Files

- `vercel.json`: Main configuration for Vercel deployment
- `vercel-dev.json`: Local development configuration for Vercel CLI
- `.env.production`: Production environment variables (not committed to git)

## Project Structure for Vercel

- `api/index.ts`: Entry point for Vercel serverless functions
- `server.ts`: Main Express app exported for serverless functions
- `dist/`: Compiled JavaScript code (generated by TypeScript)

## Best Practices

1. Always test locally with `npm run vercel-dev` before deploying
2. Keep production environment variables secure in Vercel dashboard
3. Monitor logs in Vercel dashboard for any issues
4. Set up proper CORS configurations for your frontend domain
